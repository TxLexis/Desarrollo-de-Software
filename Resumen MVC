# Resumen: Patr√≥n MVC (Modelo-Vista-Controlador)

---

## üéØ **¬øQu√© es MVC?**

**MVC** es un **patr√≥n de arquitectura de software** que separa una aplicaci√≥n en tres componentes independientes para lograr **separaci√≥n de responsabilidades**.

**Objetivo:** Hacer el c√≥digo m√°s escalable, mantenible y reutilizable.

---

## üß© **Los Tres Componentes de MVC**

### **1. Modelo (Model)**
- **Responsabilidad:** Gestionar los datos y la l√≥gica de negocio
- **Funci√≥n:** 
  - Guarda, recupera y valida datos
  - Gestiona el estado de la aplicaci√≥n
- **NO debe:**
  - Contener `print()`, `input()`, `alert()`
  - Saber nada sobre la interfaz de usuario
- **Ejemplo:** Clase `Tarea`, `Usuario`, `Producto` con sus operaciones CRUD

### **2. Vista (View)**
- **Responsabilidad:** Interfaz de usuario
- **Funci√≥n:**
  - Mostrar datos al usuario
  - Capturar entradas del usuario (teclado, clics, formularios)
- **NO debe:**
  - Hacer c√°lculos matem√°ticos
  - Tomar decisiones de negocio
  - Guardar datos directamente
- **Ejemplo:** Consola, interfaz web, app m√≥vil

### **3. Controlador (Controller)**
- **Responsabilidad:** Intermediario entre Modelo y Vista
- **Funci√≥n:**
  - Recibe eventos de la Vista
  - Llama m√©todos del Modelo
  - Actualiza la Vista con respuestas
- **NO debe:**
  - Contener l√≥gica de negocio compleja
  - Mostrar datos directamente (`print()`)
- **Ejemplo:** `TareaController`, `UsuarioController`

---

## üîÑ **Flujo de Datos en MVC**

```
Usuario ‚Üí Vista ‚Üí Controlador ‚Üí Modelo
                      ‚Üì
                   Modelo actualiza estado
                      ‚Üì
         Controlador ‚Üê Modelo
                      ‚Üì
                   Vista ‚Üê Controlador
                      ‚Üì
                   Usuario ve resultado
```

**Ejemplo concreto:**
1. Usuario hace clic en "Agregar Tarea" (**Vista**)
2. **Controlador** recibe el evento y solicita datos
3. **Controlador** env√≠a datos al **Modelo**
4. **Modelo** valida y guarda la tarea
5. **Modelo** devuelve confirmaci√≥n al **Controlador**
6. **Controlador** actualiza la **Vista** con mensaje de √©xito

---

## ‚ùå **El Problema: C√≥digo Espagueti**

**Sin MVC:**
```java
// TODO EN UN SOLO LUGAR - MAL
public void hacerTodo() {
    System.out.println("Ingrese nombre:");
    String nombre = scanner.nextLine();
    
    // Validaci√≥n mezclada con entrada
    if (nombre.length() > 2) {
        // L√≥gica de negocio mezclada
        lista.add(nombre);
        
        // Salida mezclada
        System.out.println("Guardado!");
    }
}
```

**Problemas:**
- Cambiar de consola a web requiere reescribir TODO
- Dif√≠cil de probar
- Dif√≠cil de mantener
- Bajo reutilizaci√≥n

---

## ‚úÖ **Ventajas de Usar MVC**

| Ventaja | Descripci√≥n |
|---------|-------------|
| **Reutilizaci√≥n** | El mismo Modelo funciona con Vista de consola, web o m√≥vil |
| **Paralelismo** | Varios desarrolladores pueden trabajar simult√°neamente en diferentes componentes |
| **Mantenibilidad** | Errores f√°ciles de localizar por tipo (visual vs l√≥gico) |
| **Escalabilidad** | Agregar funciones sin romper c√≥digo existente |
| **Testeo** | Probar l√≥gica de negocio sin necesidad de interfaz |

---

## üèóÔ∏è **MVC + Principios de Dise√±o**

MVC cumple con los principios fundamentales:

### **SRP (Responsabilidad √önica)**
- Vista: solo muestra
- Modelo: solo gestiona datos
- Controlador: solo coordina

### **Alta Cohesi√≥n**
- Cada componente tiene una funci√≥n clara y enfocada

### **Bajo Acoplamiento**
- Cambiar el Modelo no rompe la Vista
- Cambiar la Vista no afecta el Modelo

### **KISS (Keep It Simple)**
- Cada componente es simple en su funci√≥n

---

## üìã **Reglas de Oro de MVC**

### **El Modelo NO debe:**
‚ùå Tener comandos `print()`, `alert()`, `System.out.println()`  
‚ùå Recibir entrada del usuario directamente (`Scanner`, `input()`)  
‚ùå Conocer la existencia de la Vista

### **La Vista NO debe:**
‚ùå Hacer c√°lculos matem√°ticos o validaciones de negocio  
‚ùå Guardar datos directamente  
‚ùå Tomar decisiones l√≥gicas complejas

### **El Controlador NO debe:**
‚ùå Contener l√≥gica de negocio pesada  
‚ùå Mostrar datos directamente  
‚ùå Guardar estado (debe delegarlo al Modelo)

---

## üö© **Errores Comunes (Red Flags)**

Identifica violaciones de MVC:

| C√≥digo | ¬øEs correcto? | Raz√≥n |
|--------|---------------|-------|
| `System.out.println()` en el Modelo | ‚ùå NO | El Modelo no debe mostrar datos |
| `Scanner` en el Modelo | ‚ùå NO | El Modelo no debe capturar entrada |
| C√°lculos matem√°ticos en la Vista | ‚ùå NO | La Vista solo muestra |
| `lista.add()` en la Vista | ‚ùå NO | La Vista no guarda datos |
| Validaci√≥n de negocio en el Controlador | ‚ö†Ô∏è DEPENDE | Mejor en el Modelo |

---

## üîç **Ejemplo de C√≥digo Anti-Patr√≥n**

```java
public class SuperManager {
    private ArrayList<String> items = new ArrayList<>();
    private Scanner leer = new Scanner(System.in);

    public void procesarTodo() {
        while (true) {
            System.out.println("--- SUPERMERCADO ---");
            System.out.println("1. A√±adir 2. Ver 3. Salir");
            int opt = Integer.parseInt(leer.nextLine());

            if (opt == 1) {
                System.out.print("Nombre producto: ");
                String nombre = leer.nextLine();

                if (nombre != null && !nombre.trim().isEmpty()) {
                    if (nombre.length() > 2) {
                        boolean existe = false;
                        for(String s : items) { 
                            if(s.equals(nombre)) existe = true; 
                        }
                        if(!existe) {
                            items.add(nombre);
                            System.out.println("¬°√âxito!");
                        }
                    }
                }
            } else if (opt == 3) break;
        }
    }
}
```

### **Violaciones Identificadas:**

1. **‚ùå Violaci√≥n de SRP:** Todo est√° en una sola clase
   - Mezcla entrada/salida, l√≥gica de negocio y datos

2. **‚ùå Violaci√≥n de Cohesi√≥n:** 
   - Scanner, ArrayList, validaciones y mensajes juntos

3. **‚ùå Violaci√≥n de KISS:**
   - L√≥gica innecesariamente compleja con anidaciones profundas

4. **‚ùå No usa MVC:**
   - No hay separaci√≥n entre Modelo, Vista y Controlador

---

## ‚úÖ **Soluci√≥n con MVC**

### **Modelo**
```java
public class ProductoModel {
    private ArrayList<String> productos = new ArrayList<>();
    
    public boolean agregar(String nombre) {
        if (nombre == null || nombre.length() <= 2) {
            return false;
        }
        if (productos.contains(nombre)) {
            return false;
        }
        productos.add(nombre);
        return true;
    }
    
    public List<String> obtenerTodos() {
        return new ArrayList<>(productos);
    }
}
```

### **Vista**
```java
public class ProductoView {
    private Scanner scanner = new Scanner(System.in);
    
    public void mostrarMenu() {
        System.out.println("--- SUPERMERCADO ---");
        System.out.println("1. A√±adir 2. Ver 3. Salir");
    }
    
    public String pedirNombre() {
        System.out.print("Nombre producto: ");
        return scanner.nextLine();
    }
    
    public void mostrarExito() {
        System.out.println("¬°Producto agregado!");
    }
    
    public void mostrarError(String mensaje) {
        System.out.println("Error: " + mensaje);
    }
}
```

### **Controlador**
```java
public class ProductoController {
    private ProductoModel modelo;
    private ProductoView vista;
    
    public ProductoController(ProductoModel modelo, ProductoView vista) {
        this.modelo = modelo;
        this.vista = vista;
    }
    
    public void agregarProducto() {
        String nombre = vista.pedirNombre();
        
        if (modelo.agregar(nombre)) {
            vista.mostrarExito();
        } else {
            vista.mostrarError("Producto inv√°lido o duplicado");
        }
    }
}
```

---

## üåê **Comunicaci√≥n entre Componentes**

Los datos viajan de forma **estructurada** (JSON, objetos):

```java
// Ejemplo de objeto estructurado
{
  "tipo": "Pepperoni",
  "tama√±o": "Grande",
  "precio": 15.50,
  "ingredientes": ["queso", "salsa", "pepperoni"]
}
```

---

## üí° **Consejos Pr√°cticos**

‚úÖ **Hacer:**
- Mantener cada componente en su propio archivo/clase
- Usar nombres descriptivos (`ProductoModel`, no `Manager`)
- Validar datos en el Modelo
- Mantener el Controlador delgado (solo coordina)

‚ùå **Evitar:**
- Clases "todopoderosas" que hacen todo
- Mezclar responsabilidades
- Acceso directo entre Vista y Modelo (siempre usar Controlador)
- L√≥gica compleja en el Controlador

---

## üìö **Resumen de Responsabilidades**

| Componente | Pregunta clave | Responsabilidad |
|------------|----------------|-----------------|
| **Modelo** | ¬øQu√© datos tengo? | Gestionar datos y l√≥gica de negocio |
| **Vista** | ¬øC√≥mo se ve? | Mostrar datos y capturar entrada |
| **Controlador** | ¬øQu√© hago con esto? | Coordinar Modelo y Vista |

---

## üéì **Para Recordar**

> **"La Vista muestra, el Modelo piensa, el Controlador decide"**

MVC no es solo separar c√≥digo en carpetas, es una **mentalidad de dise√±o** que mantiene tu aplicaci√≥n limpia, flexible y profesional.

---